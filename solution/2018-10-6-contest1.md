

# 10/6提高组模拟赛题解

## T1

## T2

本题的关键点在于$b$，因为如果$b\ge 2$，所需要乘的次数是log级别的,	那么我们尝试枚举乘法使用的次数，但是在两个乘法之间可能会加入一些加法，于是我们将他们全都假设出来

假设一共进行了$N$ 次乘法，第i次乘法之前一共使用了$cnt_i$次加法，那么最终的答案为

$ ( ((S+cnt_0 * a) * b + cnt_1 * a )  * b+ ... ) * b + cnt_n * a=T$ 

化简这个式子得到

$S * b^n + a * \sum\limits_{i=0}^n cnt_i * b ^{n - i} = T$

枚举$n$之后移项

$\sum\limits_{i=0}^n cnt_i * b^{n-i} = \frac{(T - S * b^n)} a = w$

左边相当于一个b进制的数，右边是一个常数, 我们的目的是让$cnt$之和尽可能小

于是从高位到低位贪心的选$cnt$的值，比如$w\ge b^n$，那么就让$cnt_0=\frac{w}{b^n}$

高位取得越大越好

总的操作次数等于$n + \sum\limits_{i=0}^n cnt_i$

## T3

为了避免重复计数，我们枚举第一个A的位置$posA$和第一个B的位置$posB$，那么区间被分成了三段，第一段不能出现A,第二段不能出现B, 由于时间的限制我们不能再去枚举C的位置

第一段不能出现A，也就是posA之前不能出现与posA位置相同的数，然后之前的其他数只能取B或者C

第二段不能出现B，也就是posA到posB之间不能出现与posB位置相同的数，其他数可以取A或者C

那么我们可以给每种数字维护一个值表示这种数字能转变成的字符的种类数tot[num]

枚举第一个Ａ的位置后，先暴力维护此位置之前的数的tot[num]

再从这个位置向后边枚举Ｂ的位置边动态的维护tot值。维护的代价是O(1)的，因为B往右移动一个位置，下一个位置的数只能变成B,当前位置的数不能变成Ｂ，只需要更新两个数的信息就可以了



